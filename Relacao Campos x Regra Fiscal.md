## Relação de Campos da Regra Fiscal x Integrador Fiscal

Os Integradores Fiscais possuem dados para alimentar a Regra Fiscal de Entrada e Saída do Sistema Ganso. A Tabela a seguir aponta quais campos obrigatórios da **Regra Fiscal Ganso** devem ser alimentados pelo Retorno da **Consulta Avançada** para cada Integrador.

| Campo do Ganso                  | Tabela              | Descritivo                                                 |             Retorno iMendes              | Regra de Negócio                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| :------------------------------ | :------------------ | :--------------------------------------------------------- | :--------------------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| descricao                       | produto_prf         | Descrição da Regra Fiscal                                  |                    -                     | Criar uma descrição padronizada utilizando dados das informações tributárias de retorno. Sugestão: "RF IMENDES - [Tipo Entrada ou Saída] NCM [NCM] - [Perfil Fiscal] - [UF]"                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| codigo_filial                   | produto_prf         | Código da Filial de Consulta                               |                    -                     | Preencher com o Código da Filial que realizou a Consulta                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| data_inicial                    | produto_prf         | Data de Vigência Inicial                                   |                    -                     | Preencher com a Data Atual da Criação da Regra                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| data_final                      | produto_prf         | Data de Vigência Final                                     |                    -                     | Deixar em branco                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| status                          | produto_prf         | Status da Regra                                            |                    -                     | Marcar como "Ativa"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| tipo_operacao                   | produto_prf         | Tipo de Regra Fiscal (Entrada ou Saída)                    |      Depende da Operação Consultada      | Preencher com 'E' ou 'S' conforme disponibilidade de dados do Integrador                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| orig_finalidoperacao            | produto_prf         | Código da Finalidade da Operação (Critério)                |      Depende da Operação Consultada      | Preencher com o Código da **Finalidade do Produto** relacionado à Finalidade de Operação cadastrada que foi enviada para Consulta à API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| orig_perfil_fiscal              | produto_prf         | Código do Perfil Fiscal (Critério)                         |   Depende do Perfil Fiscal Consultado    | Preencher com o Código da Característica Tributária relacionada ao **Perfil Fiscal** enviado para consulta à API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| orig_uf                         | produto_prf         | UFs de Origem (Critério)                                   |   Depende da UF da Operação Consultada   | Preencher com as UFs retornadas na Tag correspondente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ncm                             | produto_prf         | NCM do Produto (Critério)                                  |               `Grupos/nCM`               | Preencher com o NCM retornado na Tag correspondente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| cest                            | produto_prf         | CEST do Produto (Critério)                                 |              `Grupos/cEST`               | Preencher com o CEST retornado na Tag correspondente. Eliminar a máscara do retorno deste campo.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| orig_cfop                       | produto_prf         | CFOP de Origem (Critério)                                  |             `CaracTrib/cFOP`             | Preencher com o CFOP retornado na Tag correspondente ou utilizar o CFOP Padrão da Operação configurado na Finalidade de Operação.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| orig_cst                        | produto_prf         | CST/CSOSN de Origem                                        |             `CaracTrib/cST`              | Preencher com o CST ou CSOSN retornado pela Tag correspondente. Se Integrador retornar apenas 2 dígitos, complementar o primeiro dígito com o dígito '0' ou conforme **Documentação do Integrador**                                                                                                                                                                                                                                                                                                                                                                                                                   |
| sugere_cfop_sn                  | produto_prf         | Definir o CFOP                                             |                    -                     | Preencher com 'S' para que o campo de CFOP seja preenchido com a informação retornada da Tag correspondente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| sugere_cfop                     | produto_prf         | CFOP a aplicar                                             |             `CaracTrib/cFOP`             | Preencher com o CFOP retornado pela Tag correspondente do Integrador, quando existir. **Consultar Documentação do Integrador**. <br> Quando não existir informação, utilizar o CFOP padrão da operação informado no Cadastro de Finalidade de Operação.                                                                                                                                                                                                                                                                                                                                                               |
| sugere_icms_cstcsosn_sn         | produto_prf         | Definir CST/CSOSN                                          |                    -                     | Preencher com 'S' para que o CST/CSOSN seja preenchido com a informação retornada da Tag correspondente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| sugere_icms_cstcsosn            | produto_prf         | CST/CSOSN a aplicar                                        |   `CaracTrib/cST` ou `CaracTrib/cSOSN`   | Preencher com o CST ou CSOSN retornado pela Tag correspondente do Integrador, adicionando como prefixo o dígito '0' ou conforme **Documentação do Integrador**                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| zerar_icms                      | produto_prf         | Zerar ICMS do Produto                                      |                    -                     | Se `CaracTrib/cST` = '60' e `CaracTrib/cFOP` = 'x403' ou 'x405' definir como 'S', caso contrário, definir como 'N'. **Consultar Documentação do Integrador**                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| sugere_icms_aliq_sn             | produto_prf         | Definir Alíquota Efetiva do ICMS (Alíquota Final)          |                    -                     | Preencher com 'S' se `CaracTrib/cST` diferente de '60' e `CaracTrib/cFOP` diferente de 'x403' ou 'x405'. **Consultar Documentação do Integrador**                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **sugere_icms_aliq_interna_sn** | produto_prf         | (Campo novo) Definir Alíquota Interna do ICMS              |                    -                     | Preencher com 'S' se `CaracTrib/cST` diferente de '60' e `CaracTrib/cFOP` diferente de 'x403' ou 'x405'. **Consultar Documentação do Integrador**                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| codigo_produto_tributo          | produto_prf         | Código do Tributo da Alíquota Efetiva do ICMS a Aplicar    |            `infPDV/pICMSPDV`             | **Regra 1** - Se UF igual a UF da Empresa Filial e o campo `CaracTrib/cST` igual a '60', preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" seja igual a 'F'. <br><br>**Regra 2** - Se UF igual a UF da Empresa Filial, `CaracTrib/cST` diferente de '60', e campo `CaracTrib/aliqIcmsInterna` maior que "zero", preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" igual a 'T' e campo "CST" seja igual ao campo `CaracTrib/aliqIcmsInterna`.                                                                                        |
| sugere_icms_aliq                | produto_prf         | Alíquota Efetiva de ICMS (Alíquota Final) a Aplicar        |            `infPDV/pICMSPDV`             | **Regra 1** - Se UF igual a UF da Empresa Filial e o campo `CaracTrib/cST` igual a '60', preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" seja igual a 'F'. <br><br>**Regra 2** - Se UF igual a UF da Empresa Filial, `CaracTrib/cST` diferente de '60', e campo `CaracTrib/aliqIcmsInterna` maior que "zero", preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" igual a 'T' e campo "CST" seja igual ao campo `CaracTrib/aliqIcmsInterna`.                                                                                        |
| **sugere_icms_aliq_interna**    | produto_prf         | (Campo novo) Alíquota de ICMS Interna a Aplicar            |       `CaracTrib/aliqIcmsInterna`        | **Regra 1** - Se UF igual a UF da Empresa Filial e o campo `CaracTrib/cST` igual a '60', preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" seja igual a 'F'. <br><br>**Regra 2** - Se UF igual a UF da Empresa Filial, `CaracTrib/cST` diferente de '60', e campo `CaracTrib/aliqIcmsInterna` maior que "zero", preencher com o Código do Tributo da tabela "PRODUTO_TRIBUTO" onde a "SITUACAO_TRIBUTARIA" igual a 'T' e campo "CST" seja igual ao campo `CaracTrib/aliqIcmsInterna`.                                                                                        |
| sugere_icms_rbc_sn              | produto_prf         | Definir Redução de Base de Cálculo do ICMS                 |                    -                     | Preencher com 'S' para que o campo Redução de Base seja preenchido                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| sugere_icms_rbc                 | produto_prf         | Percentual da Redução de Base de Cálculo do ICMS a Aplicar |        `CaracTrib/reducaoBcIcms`         | Preencher com a informação do campo retornado conforme Saída ou Entrada.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| sugere_icms_pdiferimento_sn     | produto_prf         | Definir Diferimento                                        |                    -                     | Preencher com 'S' se o campo retornado for maior que zero.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| sugere_icms_pdiferimento        | produto_prf         | Percentual de Diferimento do ICMS                          |            `CaracTrib/pDifer`            | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **sugere_icms_pdesoneracao_sn** | produto_prf         | (Campo novo) Definir Desoneração do ICMS                   |                    -                     | Preencher com 'S' se o campo `CaracTrib/pIsencao` for maior que zero.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **sugere_icms_pdesoneracao**    | produto_prf         | (Campo novo) Percentual de Desoneração do ICMS             |           `CaracTrib/pIsencao`           | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_fcp_aliq_sn              | produto_prf         | Definir FCP ICMS                                           |                    -                     | Preencher com 'S' se o campo retornado for maior que zero.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| sugere_fcp_aliq                 | produto_prf         | Percentual de FCP ICMS                                     |             `CaracTrib/fCP`              | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| icmsst_lancamento               | produto_prf         | Lançamento do ICMS ST (alterado para Destaque)             |                    -                     | **Regra 1** - Se `CaracTrib/cST` = '60' e `CaracTrib/cFOP` = '1403' ou '1401', e UF igual a UF da Empresa Filial, definir como 'O' (Original). <br><br> **Regra 2** - Se `CaracTrib/cST` = '10' e `CaracTrib/cFOP` = '2401' ou '2403', `CaracTrib/aliqIcmsInterestadual` diferente de zero, e UF diferente da UF da Empresa Filial, definir como 'D' (Dentro da NF). <br><br>**Regra 3** - Se `CaracTrib/cST` = '60' e `CaracTrib/cFOP` = '2403', `CaracTrib/aliqIcmsInterestadual` diferente de zero, `CaracTrib/iVAAjust` diferente de zero, e UF diferente da UF da Empresa Filial, definir como 'F' (Fora da NF). |
| mod_bc_icms_st                  | produto_prf         | Modalidade da Base de Cálculo do ICMS ST                   |                    -                     | Se icmsst_lancamento igual a 'D' ou 'F', preencher este campo com o código 4.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| sugere_icmsst_rbc_sn            | produto_prf         | Definir Redução de Base de Cálculo do ICMS ST              |                    -                     | Se campo retornado maior que zero, preencher este campo com 'S', caso contrário, definir como 'N'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| sugere_icmsst_rbc               | produto_prf         | Percentual de Redução de Base de Cálculo do ICMS ST        |       `CaracTrib/reducaoBcIcmsSt`        | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| icms_st_aliq                    | produto_prf         | Alíquota de ICMS ST                                        |          `CaracTrib/aliqIcmsSt`          | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_icmsst_fcp_aliq_sn       | produto_prf         | Definir Percentual de FCP ICMS ST                          |                    -                     | Se `CaracTrib/fCP` maior que zero, preencher este campo com 'S'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| sugere_icmsst_fcp_aliq          | produto_prf         | Percentual de FCP ICMS ST                                  |             `CaracTrib/fCP`              | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| origem_aliquota_icms            | **produto_prf_mva** | Alíquota de Origem do MVA                                  |    `CaracTrib/aliqIcmsInterestadual`     | Preencher com a informação do campo retornado apenas se maior que Zero, e se o campo **icmsst_lancamento** for definido como 'D' ou 'F'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| mva                             | **produto_prf_mva** | MVA - Margem de Valor Agregado Ajustada                    |           `CaracTrib/iVAAjust`           | Preencher com a informação do campo retornado apenas se o maior que Zero, e se o campo **icmsst_lancamento** for definido como 'D' ou 'F'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **mva_saida**                   | produto_prf         | (Campo Novo) MVA - Margem de Valor Agregado de Saída       |             `CaracTrib/iVA`              | Preencher com a informação do campo retornado apenas se o maior que Zero, e se o campo **icmsst_lancamento** for definido como 'D' ou 'F'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| sugere_ipi_cst_sn               | produto_prf         | Definir CST de IPI                                         |                    -                     | Definir como 'S' para que o campo do CST seja preenchido                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| sugere_ipi_cst                  | produto_prf         | CST de IPI de Entrada                                      |           `Grupos/iPI/cstEnt`            | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_ipi_aliq_sn              | produto_prf         | Definir Alíquota de IPI                                    |                    -                     | Definir como 'S' para que o campo da alíquota seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_ipi_aliq                 | produto_prf         | Alíquota de IPI de Entrada                                 |           `Grupos/iPI/aliqipi`           | Preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_pis_cst_sn               | produto_prf         | Definir CST de PIS                                         |                    -                     | Definir como 'S' para que o campo do CST seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sugere_pis_cst                  | produto_prf         | CST de PIS a Aplicar                                       | `pisCofins/cstEnt` ou `pisCofins/cstSai` | Preencher com a informação do campo retornado conforme tipo de Regra Fiscal (Entrada ou Saída)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_pis_aliq_sn              | produto_prf         | Definir Alíquota de PIS                                    |                    -                     | Definir como 'S' para que o campo do CST seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sugere_pis_aliq                 | produto_prf         | Alíquota de PIS a aplicar                                  |           `pisCofins/aliqPis`            | Preencher com a informação do campo retornado conforme tipo de Regra Fiscal (Entrada ou Saída)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_cofins_cst_sn            | produto_prf         | Definir CST de Cofins                                      |                    -                     | Definir como 'S' para que o campo do CST seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sugere_cofins_cst               | produto_prf         | CST de Cofins a Aplicar                                    | `pisCofins/cstEnt` ou `pisCofins/cstSai` | Preencher com a informação do campo retornado conforme tipo de Regra Fiscal (Entrada ou Saída)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_cofins_aliq_sn           | produto_prf         | Definir Alíquota de Cofins                                 |                    -                     | Definir como 'S' para que o campo do CST seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sugere_cofins_aliq              | produto_prf         | Alíquota de Cofins a Aplicar                               |          `pisCofins/aliqCofins`          | Preencher com a informação do campo retornado conforme tipo de Regra Fiscal (Entrada ou Saída)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| sugere_piscofins_natrec_sn      | produto_prf         | Definir Natureza da Receita de PIS e Cofins                |                    -                     | Definir como 'S' para que o campo do CST seja preenchido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| sugere_piscofins_natrec_sn      | produto_prf         | Código da Natureza da Receita de PIS e Cofins              |             `pisCofins/nri`              | Verificar se Código já existe na tabela NATUREZA_RECEITA, se não existir, deve ser criado um Registro com este novo Código, e Descrição genérica como "Natureza criada pelo integrador" e preencher com a informação do campo retornado.                                                                                                                                                                                                                                                                                                                                                                              |

[Voltar ao Sumário](#introdução) | [Voltar ao Roadmap](#roadmap)
